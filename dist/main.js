var d=(a,c,e)=>new Promise((r,n)=>{var s=o=>{try{t(e.next(o))}catch(u){n(u)}},p=o=>{try{t(e.throw(o))}catch(u){n(u)}},t=o=>o.done?r(o.value):Promise.resolve(o.value).then(s,p);t((e=e.apply(a,c)).next())});function y(a){a.on("checkout:ready",s=>d(null,[s],function*({location:c,cart:e,customer:r,store:n}){if(c.page.type==="checkout"&&c.page.data.step==="success")try{let p=e.coupon?{code:e.coupon.code,type:e.coupon.type,value:e.coupon.value}:null,t={store_id:n.id,store_name:n.name,customer:r,cart_id:e.id,total:e.prices.total,currency:n.currency,coupon:p};yield fetch("https://prd.makerslab.pro/webhook/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),console.log("Webhook enviado!")}catch(p){console.error("Erro ao enviar webhook:",p)}}))}export{y as App};
